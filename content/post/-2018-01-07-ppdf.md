---
title: 新闻爬虫
date: '2018-01-07'
linkTitle: /2018/01/07/ppdf/
source: Jiaxiang Li's Blog
description: 'library(rvest) library(tidyverse) library(rlist) news_rvest &lt;- function(url)
  { url &lt;- url #抓取网页 httr_web &lt;- read_html(url,encoding = &#39;utf-8&#39;) #抓取新闻标题
  title &lt;- httr_web %&gt;% html_nodes(&#39;h3&gt;a&#39;) %&gt;% html_text(trim
  = T) #抓取新闻发布者与日期 author &lt;- httr_web %&gt;% html_nodes(&#39;p.c-author&#39;) %&gt;%
  html_text(trim = T) candidate_date &lt;- Sys.Date() %&gt;% format(&#39;%Y年%m月%d日&#39;)
  fun &lt;- function(x){ re=if(length(x)==3){ re=c(x[1],candidate_date,x[length(x)])
  }else{ re= x[-2] } re=data.frame(发布者=re[1],日期=re[2],时间=re[3]) return(re) } ...'
disable_comments: true
---
library(rvest) library(tidyverse) library(rlist) news_rvest &lt;- function(url) { url &lt;- url #抓取网页 httr_web &lt;- read_html(url,encoding = &#39;utf-8&#39;) #抓取新闻标题 title &lt;- httr_web %&gt;% html_nodes(&#39;h3&gt;a&#39;) %&gt;% html_text(trim = T) #抓取新闻发布者与日期 author &lt;- httr_web %&gt;% html_nodes(&#39;p.c-author&#39;) %&gt;% html_text(trim = T) candidate_date &lt;- Sys.Date() %&gt;% format(&#39;%Y年%m月%d日&#39;) fun &lt;- function(x){ re=if(length(x)==3){ re=c(x[1],candidate_date,x[length(x)]) }else{ re= x[-2] } re=data.frame(发布者=re[1],日期=re[2],时间=re[3]) return(re) } ...